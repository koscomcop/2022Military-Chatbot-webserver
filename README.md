# Military-Chatbot-Web

## Intro
군 생활과 관련된 다양한 질의에 대해 인공지능 모델을 통해 상담, 답변해주는 챗봇 web server

![image](https://user-images.githubusercontent.com/14075460/186086941-1d0b6b9e-7b98-44d0-aa29-f09595b0837d.png)


## 활용데이터
국방 공공데이터
- 부대별 식단정보(Open API)
- 국방부 군인(간부) 봉급표
- 국군복지단 복지시설
- 군 복지 휴양시설
- 군 복지시설 주변 관광지
- 국방전자도서관 도서정보
- 병사 할인 혜택
- 국군복지단 복지시설
- 국방부 신분별 군 정원
- 국방부 현역군인 내집마련 정보
- 방위사업청 국방통합 용어사전
- 한국국방연구원 도서관 보유 국내장서

## 응답영역
1. 식단 : 특정 부대 식단 질문에 대해 예정된 다음주 식단 답변
  - 사용 국방데이터
    - 부대별 식단정보 호출 Open API
2. 도서 : 군 도서관에서 관리하는 정기간행물, 도서 정보 질문에 대해 도서목록, 도서정보 등 답변 
  - 사용 국방데이터 
    - 국방부 전자도서관 도서정보
    - 한국 국방연구원 도서관 보유 국내장서
3. 급여 : 각 계급별 호봉에 따른 급여 질문에 대해 답변
  - 사용 국방데이터 
    - 국방부 군인(간부) 봉급표
4. 복지 : 지역, 업체별 군 혜택질문에 대해 관련정보 답변
  - 사용 국방데이터 
    - 국군복지단 복지시설
    - 군 복지 휴양시설
    - 군 복지시설 주변 관광지
    - 국군복지단 복지시설 상세현황
5. 정원 : 군별, 직급별 인원 질문에 대해 답변
  - 사용 국방데이터
    - 신분별 군정원(2020년 기준)
6. 주거 : 군별, 지역별 군사주택 관련 질문에 대해 관련정보 답변
  - 사용 국방데이터
    - 국방부 영외 군인아파트 현황
    - 국방부 현역군인 내집마련 정보

(1) 모델제작
  - 모델 학습데이터셋 제작에 사용할 개체명 추출 : 도서명 / 저자명 / 직급 / 시설 / 지역 / 주택
  - 개체명 기반 인공지능 모델 학습데이터셋 6만여개 제작
(2) 답변생성
  - 파일형식 국방데이터 데이터베이스화 => 자용자 질의에 대한 답변 검색에 사용

## 초기 DB 구성
```
python db_init/db_insert.py
```

## web 서버 기동
```
./run.sh
```

## 모델 설명
1. 의도분류모델
  https://github.com/koscomcop/2022Military-Chatbot-jupyter/blob/main/source/22'Military_Chatbot.ipynb
    - 장병 관련 상위 6가지 의도 대한 질의유형 설계
    - 제공 국방데이터 기반 각 의도별 키워드 추출. 템플릿 기반 의도별 질문 생성
    - 군 관련 질문 아닌 기타질문은 공공데이터 포털 제공 소상공인 민원대화 데이터셋 사용
      - 최종 학습데이터 6만여개, 테스트데이터 1만여개 구축
    - GRU기반 딥러닝 모델 학습
      - 최종 모델 스코어(F1-macro, accuracy) : [0.9977624975288514, 0.9991681397525216]
      
2. 개체명인식모델
  https://github.com/koscomcop/2022Military-Chatbot-jupyter/blob/main/source/create_ner_model.ipynb
    - 개체명 인식 모델은 2가지의 모델을 혼합 이용하여 사용자가 의도한 개체명 분류
    - 5만여개의 군 관련 질문데이터셋 기반 8개의 국방 전용 BIO Tag 인식(부대명 / 시간 / 도서명 / 저자명 / 직급 / 급여 / 시설 / 지역 / 주택 / 군구분)
    - BiLSTM - CRF를 이용한 개체명 인식 모델 학습
    - 개체명 인식 실패시 Pororo 카카오 개체명인식 모델로 질의 재 분석
    - 제작한 국방 전용 BIO태그를 해당하는 뽀로로 개체명 인식기 태그로 매핑, 질의 내 개체명 재확인
  




